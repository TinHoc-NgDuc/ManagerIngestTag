<div class="summary-table-ingest">
    <div class="hearder">
        <span>Bảng tổng hợp Ingest</span>
    </div>
    <div class="action-filter">
        <div class="filter">
            <div class="item">
                <div class="item-1">
                    <span>Thời gian</span>
                    <input type="date" name="" id="">

                </div>
                <div>
                    <span>Tên phóng viên</span>
                    <select class="item-input" name="" id="" title="Tên phóng viên">
                        <option *ngFor="let item of employeeReportSrc" value="item.EmployeeId">{{item.Name}}</option>
                    </select>
                </div>
            </div>
            <div class="item">
                <div class="item-1">
                    <span>Đơn vị sản xuất</span>
                    <select class="item-input" name="" id="" title="Đơn vị sản xuất">
                        <option *ngFor="let item of productionUnitSrc" value="item.ProductionUnitId">{{item.Name}}
                        </option>
                    </select>
                </div>
                <div>
                    <span>Tên Quay phim</span>
                    <select class="item-input" name="" id="" title="Tên Quay Phim">
                        <option *ngFor="let item of employeeCameramanSrc" value="item.EmployeeId">{{item.Name}}</option>
                    </select>
                </div>
            </div>
            <div class="item">
                <div class="item-1">
                    <span>Trang thái</span>
                    <select class="item-input" name="" id="" title="Trạng thái">
                        <option *ngFor="let item of statusIngests" value="item.StatusIngestId">{{item.Name}}</option>
                    </select>

                </div>
                <div>
                    <span>Tìm kiếm</span>
                    <input type="text" class="item-input" placeholder="Nhập từ khoá">
                </div>
            </div>
            <div class="item">
                <i class="btn btn-success" (click)="ExportExcel()">Xuất Execl</i>
                <i class="btn btn-primary" (click)="Add()">Thêm mới</i>
            </div>
        </div>
    </div>
    <div class="gTable">
        <table>
            <thead>
                <tr>
                    <th rowspan="3">STT</th>
                    <th rowspan="3">Trạng thái</th>
                    <th rowspan="3">Ngày</th>
                    <th rowspan="3">Tên đề tài</th>
                    <th rowspan="3">Phóng viên</th>
                    <th rowspan="3">Quay phim</th>
                    <th rowspan="3">Thể loại ingest</th>
                    <th rowspan="3">Lưu tư liệu</th>
                    <th rowspan="3">Thể loại</th>
                    <th colspan="8">Thông tin chi tiết</th>
                    <th rowspan="3">Người nhận thẻ</th>
                </tr>
                <tr>
                    <th colspan="4">Gửi thẻ</th>
                    <th colspan="4">Trả thẻ</th>
                </tr>
                <tr>
                    <th>Thời gian</th>
                    <th>Người gửi thẻ</th>
                    <th>Mã thẻ</th>
                    <th>Tên thẻ</th>
                    <th>Thời gian</th>
                    <th>Người lấy thẻ</th>
                    <th>Mã thẻ</th>
                    <th>Tên thẻ</th>
                </tr>
            </thead>
            <tbody>
                <ng-container *ngFor="let item of summaryingests; let indexVale = index;">
                    <tr (click)="onClick(item)">
                        <td [attr.rowspan]="item.ingestDetail.length +1" class="center">{{indexVale+1}}</td>
                        <td [attr.rowspan]="item.ingestDetail.length+1">{{item.ticketIngest.StatusIngest}}</td>
                        <td [attr.rowspan]="item.ingestDetail.length+1">{{item.ticketIngest.DateCreate | date: 'dd/MM/yyyy'}}</td>
                        <td [attr.rowspan]="item.ingestDetail.length+1">{{item.ticketIngest.Name}}</td>
                        <td [attr.rowspan]="item.ingestDetail.length+1">{{item.ticketIngest.ReporterName}}</td>
                        <td [attr.rowspan]="item.ingestDetail.length+1">{{item.ticketIngest.CameramanName}}</td>
                        <td [attr.rowspan]="item.ingestDetail.length+1">{{item.ingestDetail[0].IngestTag.CategoryName}}
                        </td>
                        <td [attr.rowspan]="item.ingestDetail.length+1">{{item.ticketIngest.SaveDocument}}</td>
                        <td [attr.rowspan]="item.ingestDetail.length+1" [hidden]="!item.ticketIngest.IsNew">Tin</td>
                        <td [attr.rowspan]="item.ingestDetail.length+1" [hidden]="!item.ticketIngest.IsCategory">Chuyên
                            Mục</td>
                        <td [attr.rowspan]="item.ingestDetail.length+1" [hidden]="!item.ticketIngest.IsReporting">Phóng
                            sự
                        </td>
                        <td [attr.rowspan]="item.ingestDetail.length+1" [hidden]="!item.ticketIngest.IsOtherProgram">
                            Chương trình khác</td>
                    </tr>
                    <tr *ngFor="let obj of item.ingestDetail">
                        <td>{{obj.DateSend}}</td>
                        <td>{{item.ticketIngest.CreateName}}</td>
                        <td>{{obj.IngestTag.IngestCode}}</td>
                        <td>{{obj.IngestTag.Name}}</td>
                        <td [hidden]="obj.TakerName != undefined && obj.TakerName.length <= 0">
                            {{obj.DateReturn}}</td>
                        <td [hidden]="obj.TakerName != undefined &&obj.TakerName.length <= 0">
                            {{obj.TakerName}}</td>
                        <td [hidden]="obj.TakerName != undefined &&obj.TakerName.length <= 0">
                            {{obj.IngestTag.IngestCode}}</td>
                        <td [hidden]="obj.TakerName != undefined &&obj.TakerName.length <= 0">
                            {{obj.IngestTag.Name}}
                        </td>
                        <td [hidden]="!(obj.TakerName == undefined || obj.TakerName.length <= 0)">
                        </td>
                        <td [hidden]="!(obj.TakerName == undefined ||obj.TakerName.length <= 0)">
                        </td>
                        <td [hidden]="!(obj.TakerName == undefined ||obj.TakerName.length <= 0)">
                        </td>
                        <td [hidden]="!(obj.TakerName == undefined ||obj.TakerName.length <= 0)">
                        </td>
                        <td>{{obj.RecipientName}}</td>
                    </tr>
                </ng-container>

            </tbody>
        </table>
        <!-- <p>{{summaryingests[0]|json}}</p> -->
    </div>
</div>
<app-ingest-tag-detail [isShow]=isShow [isAdd]=isAdd [isPending]=isPending [isApproved]=isApproved [isDarft]=isDarft
    [summaryIngest]=summaryingest (changeStatusShow)="changeStatusShow()"></app-ingest-tag-detail>